<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/25"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.ucop.edu.controller.CourseManagementController"
            style="-fx-background-color: #f3f6fb;">

    <!-- HEADER -->
    <top>
        <HBox spacing="12"
              style="-fx-background-color: linear-gradient(to right, #2563eb, #1d4ed8);
                     -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.18), 14, 0, 0, 3);">
            <padding>
                <Insets top="14" right="16" bottom="14" left="16"/>
            </padding>

            <Label text="QUáº¢N LÃ KHÃ“A Há»ŒC"
                   style="-fx-text-fill: white; -fx-font-size: 18px; -fx-font-weight: bold;"/>

            <Region HBox.hgrow="ALWAYS"/>

            <Button text="â¬… Quay láº¡i"
                    onAction="#backToDashboard"
                    style="-fx-background-color: rgba(255,255,255,0.18);
                           -fx-text-fill: white;
                           -fx-font-weight: bold;
                           -fx-background-radius: 10;
                           -fx-padding: 8 14;
                           -fx-cursor: hand;"/>
        </HBox>
    </top>

    <!-- BODY -->
    <center>
        <SplitPane dividerPositions="0.62" style="-fx-background-color: transparent;">

            <!-- LEFT: TABLE + FILTER CARD -->
            <VBox spacing="12"
                  style="-fx-background-color: white;
                         -fx-background-radius: 14;
                         -fx-border-radius: 14;
                         -fx-border-color: #e5e7eb;
                         -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.10), 16, 0, 0, 4);">
                <padding>
                    <Insets top="16" right="16" bottom="16" left="16"/>
                </padding>

                <Label text="ðŸ“‹ Danh sÃ¡ch khÃ³a há»c"
                       style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #111827;"/>

                <!-- FILTER BAR -->
                <HBox spacing="10" alignment="CENTER_LEFT"
                      style="-fx-background-color: #f8fafc; -fx-background-radius: 12; -fx-border-radius: 12; -fx-border-color: #e5e7eb;">
                    <padding>
                        <Insets top="10" right="10" bottom="10" left="10"/>
                    </padding>

                    <Label text="Danh má»¥c:" style="-fx-text-fill: #374151; -fx-font-weight: bold;"/>
                    <ComboBox fx:id="cbFilterCategory" promptText="Táº¥t cáº£"
                              style="-fx-background-radius: 10; -fx-border-radius: 10; -fx-border-color: #e5e7eb;"/>

                    <Region HBox.hgrow="ALWAYS"/>

                    <TextField fx:id="txtSearch" promptText="TÃ¬m theo tÃªn khÃ³a há»c..."
                               prefWidth="240"
                               style="-fx-background-radius: 10; -fx-border-radius: 10; -fx-border-color: #e5e7eb;"/>

                    <Button text="ðŸ” TÃ¬m"
                            onAction="#handleSearch"
                            style="-fx-background-color: #2563eb;
                                   -fx-text-fill: white;
                                   -fx-font-weight: bold;
                                   -fx-background-radius: 10;
                                   -fx-padding: 8 12;
                                   -fx-cursor: hand;"/>

                    <Button text="â†© Reset"
                            onAction="#handleResetFilter"
                            style="-fx-background-color: #e5e7eb;
                                   -fx-text-fill: #111827;
                                   -fx-font-weight: bold;
                                   -fx-background-radius: 10;
                                   -fx-padding: 8 12;
                                   -fx-cursor: hand;"/>
                </HBox>

                <!-- TABLE -->
                <TableView fx:id="tblCourses" prefHeight="520"
                           style="-fx-background-radius: 10; -fx-border-radius: 10; -fx-border-color: #e5e7eb;">
                    <columns>
                        <TableColumn fx:id="colId" text="MÃ£" prefWidth="70"/>
                        <TableColumn fx:id="colName" text="TÃªn khÃ³a há»c" prefWidth="220"/>
                        <TableColumn fx:id="colCategory" text="Danh má»¥c" prefWidth="160"/>
                        <TableColumn fx:id="colFee" text="Há»c phÃ­" prefWidth="110"/>
                        <TableColumn fx:id="colDuration" text="Giá»" prefWidth="70"/>
                        <TableColumn fx:id="colMaxSeats" text="Tá»‘i Ä‘a" prefWidth="70"/>
                        <TableColumn fx:id="colAvailableSeats" text="CÃ²n" prefWidth="70"/>
                        <TableColumn fx:id="colStatus" text="Tráº¡ng thÃ¡i" prefWidth="110"/>
                        <TableColumn fx:id="colImage" text="áº¢nh" prefWidth="90"/>
                    </columns>
                </TableView>

                <Label text="ðŸ’¡ Máº¹o: Click 1 dÃ²ng trong báº£ng Ä‘á»ƒ tá»± Ä‘á»• dá»¯ liá»‡u sang form bÃªn pháº£i."
                       wrapText="true"
                       style="-fx-text-fill: #6b7280;"/>
            </VBox>

            <!-- RIGHT: FORM CARD -->
            <VBox spacing="12"
                  style="-fx-background-color: white;
                         -fx-background-radius: 14;
                         -fx-border-radius: 14;
                         -fx-border-color: #e5e7eb;
                         -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.10), 16, 0, 0, 4);">
                <padding>
                    <Insets top="16" right="16" bottom="16" left="16"/>
                </padding>

                <Label text="ðŸ§¾ ThÃ´ng tin khÃ³a há»c"
                       style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #111827;"/>

                <GridPane hgap="10" vgap="10">
                    <columnConstraints>
                        <ColumnConstraints minWidth="130"/>
                        <ColumnConstraints hgrow="ALWAYS"/>
                    </columnConstraints>

                    <Label text="MÃ£ khÃ³a há»c:" GridPane.rowIndex="0" GridPane.columnIndex="0"
                           style="-fx-text-fill: #374151; -fx-font-weight: bold;"/>
                    <TextField fx:id="txtId" editable="false" promptText="Tá»± Ä‘á»™ng"
                               GridPane.rowIndex="0" GridPane.columnIndex="1"
                               style="-fx-background-radius: 10; -fx-border-radius: 10; -fx-border-color: #e5e7eb;"/>

                    <Label text="TÃªn khÃ³a há»c:" GridPane.rowIndex="1" GridPane.columnIndex="0"
                           style="-fx-text-fill: #374151; -fx-font-weight: bold;"/>
                    <TextField fx:id="txtName" promptText="Nháº­p tÃªn khÃ³a há»c..."
                               GridPane.rowIndex="1" GridPane.columnIndex="1"
                               style="-fx-background-radius: 10; -fx-border-radius: 10; -fx-border-color: #e5e7eb;"/>

                    <Label text="Danh má»¥c:" GridPane.rowIndex="2" GridPane.columnIndex="0"
                           style="-fx-text-fill: #374151; -fx-font-weight: bold;"/>
                    <ComboBox fx:id="cbCategory" promptText="Chá»n danh má»¥c"
                              GridPane.rowIndex="2" GridPane.columnIndex="1"
                              style="-fx-background-radius: 10; -fx-border-radius: 10; -fx-border-color: #e5e7eb;"/>

                    <Label text="Tráº¡ng thÃ¡i:" GridPane.rowIndex="3" GridPane.columnIndex="0"
                           style="-fx-text-fill: #374151; -fx-font-weight: bold;"/>
                    <ComboBox fx:id="cbStatus" promptText="Má»ž / ÄÃ“NG"
                              GridPane.rowIndex="3" GridPane.columnIndex="1"
                              style="-fx-background-radius: 10; -fx-border-radius: 10; -fx-border-color: #e5e7eb;"/>

                    <Label text="Há»c phÃ­:" GridPane.rowIndex="4" GridPane.columnIndex="0"
                           style="-fx-text-fill: #374151; -fx-font-weight: bold;"/>
                    <TextField fx:id="txtFee" promptText="VD: 2500000"
                               GridPane.rowIndex="4" GridPane.columnIndex="1"
                               style="-fx-background-radius: 10; -fx-border-radius: 10; -fx-border-color: #e5e7eb;"/>

                    <Label text="Sá»‘ giá» há»c:" GridPane.rowIndex="5" GridPane.columnIndex="0"
                           style="-fx-text-fill: #374151; -fx-font-weight: bold;"/>
                    <TextField fx:id="txtDuration" promptText="VD: 30"
                               GridPane.rowIndex="5" GridPane.columnIndex="1"
                               style="-fx-background-radius: 10; -fx-border-radius: 10; -fx-border-color: #e5e7eb;"/>

                    <Label text="Sá»‘ chá»— tá»‘i Ä‘a:" GridPane.rowIndex="6" GridPane.columnIndex="0"
                           style="-fx-text-fill: #374151; -fx-font-weight: bold;"/>
                    <TextField fx:id="txtMaxSeats" promptText="VD: 40"
                               GridPane.rowIndex="6" GridPane.columnIndex="1"
                               style="-fx-background-radius: 10; -fx-border-radius: 10; -fx-border-color: #e5e7eb;"/>

                    <Label text="Sá»‘ chá»— cÃ²n:" GridPane.rowIndex="7" GridPane.columnIndex="0"
                           style="-fx-text-fill: #374151; -fx-font-weight: bold;"/>
                    <TextField fx:id="txtAvailableSeats" promptText="VD: 40"
                               GridPane.rowIndex="7" GridPane.columnIndex="1"
                               style="-fx-background-radius: 10; -fx-border-radius: 10; -fx-border-color: #e5e7eb;"/>

                    <Label text="NgÆ°á»i táº¡o:" GridPane.rowIndex="8" GridPane.columnIndex="0"
                           style="-fx-text-fill: #374151; -fx-font-weight: bold;"/>
                    <TextField fx:id="txtCreatedBy" promptText="admin"
                               GridPane.rowIndex="8" GridPane.columnIndex="1"
                               style="-fx-background-radius: 10; -fx-border-radius: 10; -fx-border-color: #e5e7eb;"/>

                    <Label text="NgÆ°á»i cáº­p nháº­t:" GridPane.rowIndex="9" GridPane.columnIndex="0"
                           style="-fx-text-fill: #374151; -fx-font-weight: bold;"/>
                    <TextField fx:id="txtUpdatedBy" promptText="admin"
                               GridPane.rowIndex="9" GridPane.columnIndex="1"
                               style="-fx-background-radius: 10; -fx-border-radius: 10; -fx-border-color: #e5e7eb;"/>

                    <Label text="MÃ´ táº£:" GridPane.rowIndex="10" GridPane.columnIndex="0"
                           style="-fx-text-fill: #374151; -fx-font-weight: bold;"/>
                    <TextArea fx:id="txtDescription" promptText="Nháº­p mÃ´ táº£..."
                              prefRowCount="4"
                              GridPane.rowIndex="10" GridPane.columnIndex="1"
                              style="-fx-background-radius: 10; -fx-border-radius: 10; -fx-border-color: #e5e7eb;"/>

                    <!-- IMAGE -->
                    <Label text="áº¢nh khÃ³a há»c:" GridPane.rowIndex="11" GridPane.columnIndex="0"
                           style="-fx-text-fill: #374151; -fx-font-weight: bold;"/>

                    <HBox spacing="8" GridPane.rowIndex="11" GridPane.columnIndex="1">
                        <TextField fx:id="txtImageUrl"
                                   promptText="(Chá»n áº£nh Ä‘á»ƒ tá»± Ä‘iá»n Ä‘Æ°á»ng dáº«n)"
                                   HBox.hgrow="ALWAYS"
                                   style="-fx-background-radius: 10; -fx-border-radius: 10; -fx-border-color: #e5e7eb;"/>
                        <Button text="ðŸ“ Chá»n..."
                                onAction="#handleChooseImage"
                                style="-fx-background-color: #2563eb;
                                       -fx-text-fill: white;
                                       -fx-font-weight: bold;
                                       -fx-background-radius: 10;
                                       -fx-padding: 8 12;
                                       -fx-cursor: hand;"/>
                    </HBox>

                    <Label text="Xem trÆ°á»›c:" GridPane.rowIndex="12" GridPane.columnIndex="0"
                           style="-fx-text-fill: #374151; -fx-font-weight: bold;"/>

                    <StackPane GridPane.rowIndex="12" GridPane.columnIndex="1"
                               style="-fx-background-color: #f8fafc;
                                      -fx-background-radius: 12;
                                      -fx-border-radius: 12;
                                      -fx-border-color: #e5e7eb;">
                        <padding>
                            <Insets top="10" right="10" bottom="10" left="10"/>
                        </padding>

                        <ImageView fx:id="imgPreview"
                                   fitWidth="240" fitHeight="150"
                                   preserveRatio="true"/>
                    </StackPane>

                </GridPane>

                <!-- CRUD BUTTONS -->
                <HBox spacing="10">
                    <Button text="âž• ThÃªm"
                            onAction="#handleAdd"
                            style="-fx-background-color: #22c55e;
                                   -fx-text-fill: white;
                                   -fx-font-weight: bold;
                                   -fx-background-radius: 10;
                                   -fx-padding: 9 14;
                                   -fx-cursor: hand;"/>

                    <Button text="âœï¸ Sá»­a"
                            onAction="#handleUpdate"
                            style="-fx-background-color: #f59e0b;
                                   -fx-text-fill: white;
                                   -fx-font-weight: bold;
                                   -fx-background-radius: 10;
                                   -fx-padding: 9 14;
                                   -fx-cursor: hand;"/>

                    <Button text="ðŸ—‘ XÃ³a"
                            onAction="#handleDelete"
                            style="-fx-background-color: #ef4444;
                                   -fx-text-fill: white;
                                   -fx-font-weight: bold;
                                   -fx-background-radius: 10;
                                   -fx-padding: 9 14;
                                   -fx-cursor: hand;"/>

                    <Region HBox.hgrow="ALWAYS"/>

                    <Button text="ðŸ”„ LÃ m má»›i"
                            onAction="#handleClear"
                            style="-fx-background-color: #e5e7eb;
                                   -fx-text-fill: #111827;
                                   -fx-font-weight: bold;
                                   -fx-background-radius: 10;
                                   -fx-padding: 9 14;
                                   -fx-cursor: hand;"/>
                </HBox>

                <Label fx:id="lblMsg" wrapText="true"
                       style="-fx-text-fill: #2563eb; -fx-font-weight: bold;"/>

                <Label text="âš  LÆ°u Ã½: áº¢nh nÃªn lÃ  .png/.jpg vÃ  dung lÆ°á»£ng nhá» Ä‘á»ƒ load nhanh."
                       wrapText="true"
                       style="-fx-text-fill: #6b7280;"/>
            </VBox>

        </SplitPane>
    </center>

    <padding>
        <Insets top="12" right="12" bottom="12" left="12"/>
    </padding>

</BorderPane>
